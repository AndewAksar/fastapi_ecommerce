# Проект на FastAPI

## Описание
Проект представляет собой веб-приложение, разработанное с использованием фреймворка FastAPI.
Приложение предоставляет API для небольшого онлайн-магазина.

## Технологии
- **FastAPI**: Фреймворк для создания высокопроизводительных веб-приложений на Python 3.7+.
- **Uvicorn**: ASGI-сервер для запуска приложения.
- **Pytest**: Инструмент для тестирования.
- **Git**: Система контроля версий.

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/ваш_репозиторий.git
   cd ваш_репозиторий
   ```

2. **Создайте и активируйте виртуальное окружение:**
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Linux/macOS
   # или
   .venv\Scripts\activate    # Windows PowerShell
   ```

3. **Установите зависимости:**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

4. **Настройте переменные окружения:**
   Проект использует Redis в качестве брокера Celery и PostgreSQL для базы данных. По умолчанию значения зашиты в коде, поэтому перед запуском удобно задать собственные параметры через переменные окружения (например, создать файл `.env` и выполнить `source .env`). Минимальный набор переменных:

   ```bash
   export CELERY_BROKER_URL="redis://localhost:6379/0"
   export CELERY_RESULT_BACKEND="redis://localhost:6379/0"
   export DATABASE_URL="postgresql+asyncpg://ecommerce:1234@localhost:5432/ecommerce"
   ```

   Убедитесь, что сервисы Redis и PostgreSQL доступны по указанным адресам или укажите свои значения.

5. **Примените миграции базы данных:**
   Выполняйте команды из корня проекта. Если используется Alembic по умолчанию, достаточно запустить:

   ```bash
   alembic upgrade head
   ```

6. **Запустите сервер разработки:**
   ```bash
   uvicorn app.main:app --reload
   ```

## Запуск Celery-воркера

Для выполнения фоновых задач запустите Celery-воркер в отдельном процессе после настройки переменных окружения:

```bash
celery -A app.main.celery worker --loglevel=info
```

При необходимости укажите параметры подключения к брокеру и бекенду через переменные окружения, чтобы они совпадали с настройками Redis.
